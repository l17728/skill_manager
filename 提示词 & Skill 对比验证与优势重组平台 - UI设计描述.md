# 提示词 & Skill 对比验证与优势重组平台 - UI设计描述

本文档基于现有功能模块、TODO任务及典型User Case交互流程，设计贴合SDD落地需求的UI界面，核心原则：**操作流程与User Case完全对齐、功能入口与模块一一对应、交互流畅且适配开发落地、简洁高效适配开发/测试人员使用**，确保每个用户操作场景都有明确的UI支撑，每个模块功能都有对应操作入口。

# 一、整体UI布局（全局统一框架）

采用“顶部导航栏+左侧侧边栏+中间主内容区+右侧辅助面板”的四栏布局，全局风格简洁、轻量化，以功能性为主，避免冗余设计，适配开发人员日常操作习惯。

- **顶部导航栏**：固定在页面顶部，包含平台名称、全局搜索框（支持Skill/Agent/测试基线/项目检索）、用户操作区（个人设置、版本备份、日志查看入口）、系统状态提示（CLI连接状态、上下文占用状态）。

- **左侧侧边栏**：固定在页面左侧，按功能模块分类，对应文档中核心模块，支持折叠/展开，点击模块名称切换主内容区，入口如下：
        

    - 资产底座（展开后包含：Skill/Agent管理、测试基线管理）

    - 测试管理（展开后包含：测试项目管理、自动化对比测试）

    - 执行引擎（展开后包含：CLI配置、会话管理）

    - 分析重组（展开后包含：差异分析、Skill重组、迭代验证）

    - 系统设置（全局配置、目录管理、日志查询）

- **中间主内容区**：动态切换，展示当前选中模块的核心操作界面，承载所有用户核心操作（导入、浏览、搜索、对比、重组、迭代等），支持分页、筛选、详情展开。

- **右侧辅助面板**：可折叠，根据当前操作场景动态展示辅助内容，如：标签管理面板、上下文监控面板、操作指引面板、版本历史面板，提升操作效率。

# 二、核心模块UI设计（贴合User Case全流程）

## 2.1 资产底座模块UI（对应场景1、场景2：导入Skill/Agent、导入测试基线）

### 2.1.1 Skill/Agent管理界面（对应模块1）

主内容区分“浏览区+操作区”，贴合“目的分类+提供方分层”的文件组织规范，支撑导入、打标签、编辑、检索全操作：

- **顶部操作区**：包含3个核心按钮（导入Skill/Agent、批量操作、刷新），导入按钮点击后弹出弹窗，支持两种导入方式（文本粘贴、文件上传，支持.txt/.md/.json格式），弹窗内包含元数据填写区域（名称、描述、作者、版本、目的分类、提供方），必填项标注星号。

- **分类筛选区**：左侧为分类树，按“目的分类→提供方”分层展示，点击分类自动筛选当前分类下的Skill/Agent；右侧为标签筛选栏，支持多选标签，可结合分类进行组合筛选。

- **列表浏览区**：分页展示Skill/Agent列表，表头包含：名称、版本、目的分类、提供方、标签、创建时间、操作，每条数据支持hover预览（显示核心提示词片段、元数据），操作列包含：详情、编辑、自动打标签、版本管理、删除。

- **成绩 Badge**：有测试记录的 Skill/Agent，在列表项版本 badge 右侧展示测试成绩 badge（格式：`📊 87.3`）。badge 颜色：绿色=当前版本有效成绩，琥珀色=Skill 已更新但旧版本有成绩，灰色=仅有基线已更新的成绩。点击 badge 跳转至 Rankings 页并自动以该 Skill 过滤。无测试记录时不显示 badge。hover 时 tooltip 显示：最优成绩所在基线名称及测试次数。

- **自动打标签相关UI**：
        

    - 单个打标签：点击列表中“自动打标签”按钮，弹出确认弹窗，显示“将调用Claude CLI生成标签，是否继续”，确认后触发打标签，右侧辅助面板显示打标签进度、CLI执行日志。

    - 批量打标签：勾选多条Skill/Agent，点击“批量操作→批量打标签”，执行逻辑同单个，支持查看批量进度，失败项标注原因并支持重试。

    - 标签审核：打标签完成后，列表中对应数据标签栏显示“待审核”标识，点击进入详情页，详情页包含“待审核标签”区域，支持对标签进行确认、修改、删除，操作后标签状态同步更新，自动保存审核记录。

- **详情/编辑界面**：点击详情或编辑按钮进入，分为三个标签页：基本信息（元数据）、标签管理（人工标签增删改查、已生效自动标签、审核记录）、版本历史（所有版本列表、diff对比、回滚按钮），编辑界面支持修改提示词内容、元数据、标签，保存后自动生成新版本。详情页底部新增"测试历史"折叠区，展示该 Skill 历史测试记录（日期、基线名称、测试版本、得分、新鲜度），底部提供"在排行榜中查看全部 →"链接跳转至 Rankings 页。

### 2.1.2 测试基线管理界面（对应模块2）

与Skill/Agent管理界面布局一致，保持操作一致性，核心差异的适配基线管理需求：

- 导入弹窗：支持三种导入方式（手动录入、文件上传、CLI辅助生成），手动录入时可批量添加用例（用例ID、名称、输入、预期输出、说明、用例分类），CLI辅助生成需配置CLI参数，点击“生成”后调用CLI生成基线用例。

- 列表表头：名称、版本、目的分类、提供方、标签、用例数量、创建时间、操作，hover预览显示基线包含的用例数量、核心用例片段。

- 详情/编辑界面：标签页包含“基本信息、标签管理、用例管理、版本历史”，用例管理页支持新增、编辑、删除用例，批量导入/导出用例，按用例分类筛选。

- 自动打标签：逻辑与Skill/Agent一致，标签可按场景、难度、功能、模型类型分类，审核后生效并同步更新标签文件。

## 2.2 浏览/搜索功能UI（对应场景3：浏览、搜索Skill/Agent）

浏览、搜索功能贯穿Skill/Agent管理、测试基线管理界面，核心UI设计确保便捷性：

- **分类浏览**：左侧分类树支持展开/折叠，点击“目的分类”显示该分类下所有提供方，点击提供方显示该提供方下所有Skill/Agent（或基线），列表自动刷新，分类树支持记忆上次展开状态。

- **搜索功能**：
        

    - 全局搜索：顶部导航栏搜索框，输入关键词（名称、描述、标签、内容关键词），点击搜索后，弹出搜索结果弹窗，按“Skill/Agent、测试基线、测试项目”分类展示，点击结果可直接跳转至对应详情页。

    - 局部搜索：各管理界面顶部均有局部搜索框，仅搜索当前模块下的资产，支持模糊搜索，实时联想匹配，搜索结果实时刷新列表。

- **浏览辅助**：列表支持按创建时间、版本号排序，分页控件包含页码切换、每页条数选择（10/20/50条），hover预览支持自定义预览长度（可在系统设置中配置）。

## 2.3 测试管理模块UI（对应场景4：选择对比对象、执行对比测试）

### 2.3.1 测试项目管理界面（对应模块3）

- **顶部操作区**：核心按钮（创建项目、导入项目、导出项目、备份项目），创建项目按钮点击后弹出弹窗，为核心操作入口。

- **创建项目弹窗**：分三步完成，逻辑贴合任务3-1、3-2：
        

    - 第一步：选择对比对象，支持勾选多个Skill/Agent（最多10个），可通过分类、标签筛选快速选择，勾选后显示选中列表，支持移除。

    - 第二步：选择测试基线，支持勾选1个或多个基线（最多5个），同样支持筛选，勾选后显示基线名称、用例数量。

    - 第三步：配置参数，包含项目名称、描述、模型版本选择、CLI参数配置（超时时间、重试次数）、项目保存路径（默认按文档目录规范生成，可手动修改），点击“创建”后自动生成项目目录，跳转至项目详情页。

- **项目列表区**：分页展示所有测试项目，表头包含：项目名称、Skill数量、基线数量、创建时间、状态（未开始/运行中/已完成/中断）、操作，操作列包含：进入项目、导出、备份、删除。

- **项目详情页**：包含项目信息（可编辑）、关联资产（Skill/Agent、基线，可查看详情）、测试记录、项目日志、项目目录预览，支持重新打开中断的项目、继续未完成的测试。

### 2.3.2 自动化对比测试界面（对应模块6）

嵌入在测试项目详情页中，作为“测试执行”标签页展示，支撑场景4的测试执行、结果查看：

- **测试控制区**：包含“开始测试、暂停测试、终止测试”三个按钮，显示当前测试进度（已执行用例数/总用例数）、当前执行步骤、剩余时间，支持查看测试队列。

- **测试配置区**：可修改CLI参数（仅测试未开始时可修改），设置容错规则（单个用例失败是否中断整体测试），配置结果保存方式（结构化存储、日志保存）。

- **测试结果区**：测试完成后，按“Skill/Agent+基线”分组展示结果，包含：每个用例的输入、各Skill的输出、预期输出、匹配度评分、耗时、异常信息，支持按用例、按Skill筛选结果，可导出测试结果（json/csv格式）。

- **容错与日志**：单个用例失败时，列表中用例显示“失败”标识，鼠标悬浮显示失败原因（CLI执行异常、上下文溢出等），支持重试该用例；测试日志实时刷新，显示每一步执行详情、CLI输出信息，可复制、导出日志。

## 2.4 分析重组与迭代验证模块UI（对应场景5：浏览结果、重组迭代优化）

### 2.4.1 差异分析与结果浏览界面（对应模块7）

作为测试项目详情页的“结果分析”标签页，支撑场景5的“浏览对比结果”操作：

- **结果概览区**：展示各Skill/Agent的整体评分、最优Skill推荐、核心差异汇总（文字描述），支持生成结构化分析报告（可导出）。

- **差异详情区**：按用例分组，展示各Skill输出与预期输出的差异、各Skill之间的输出差异，支持高亮显示差异部分，可对比查看任意两个Skill的输出细节。

- **优势片段提取区**：自动提取各Skill的优势片段（贴合任务7-2），按“优势类型”分类展示（如：指令清晰、输出精准、逻辑严谨），每个优势片段标注所属Skill，支持勾选（为后续重组的“保留标准”做准备）。

### 2.4.2 Skill优势重组界面（对应模块8）

从“结果分析”标签页点击“启动重组”按钮进入，核心支撑“指定保留标准、重组、预览编辑”操作，贴合补充后的任务8-1、8-3：

- **保留标准指定区**：核心操作区，支持两种指定方式：
        

    - 方式1：勾选优势片段，从差异分析中提取的优势片段列表中，勾选需要保留的片段，勾选后显示“已保留”标识，支持调整保留优先级。

    - 方式2：手动输入保留规则，文本框中输入具体保留要求（如：保留Skill A的指令开头、保留Skill B的输出格式），支持换行、分段编辑。

- **重组配置区**：设置重组策略（融合优先级、冗余内容剔除、格式统一），可选择是否保留溯源信息（标注各片段所属Skill）。

- **重组执行与预览区**：点击“执行重组”按钮，显示重组进度，重组完成后，预览区显示重组后的Skill完整内容，支持编辑（编辑时，若删除已指定保留的片段，弹出提示“该片段为您指定的保留内容，是否确认删除？”）。

- **操作按钮区**：包含“保存重组结果”（保存为新的Skill版本，关联溯源信息）、“启动迭代优化”（跳转至迭代验证界面）、“重新重组”、“取消”。

### 2.4.3 迭代验证闭环界面（对应模块9）

从重组界面点击“启动迭代优化”进入，支撑场景5的“迭代优化、查看报告”操作，贴合补充后的任务9-1：

- **迭代控制区**：设置迭代参数，包含：迭代轮次（默认3轮，可修改）、停止阈值（如：匹配度≥95%自动停止）、保留标准（继承重组时指定的保留标准，可修改），点击“开始迭代”启动流程。

- **迭代进度区**：显示当前迭代轮次、每轮进度（重组→测试→分析）、每轮的核心优化点、匹配度变化曲线，支持暂停迭代、终止迭代。

- **迭代历史区**：展示每一轮的重组结果、测试结果、差异分析，支持对比任意两轮的结果，查看优化过程。

- **迭代报告与结果区**：迭代完成后，生成迭代进化报告（包含每轮优化详情、最终匹配度、最优版本推荐），支持导出报告；最优版本展示区显示最终重组的Skill内容，支持保存为新Skill、编辑、重新迭代。

## 2.5 辅助模块UI（支撑核心流程）

### 2.5.1 Claude CLI执行引擎UI（对应模块4）

主要为后台执行，UI仅展示配置和状态，入口在左侧侧边栏“执行引擎→CLI配置”：

- CLI配置界面：包含CLI路径配置、默认模型选择、超时时间、重试次数设置，支持保存配置、重置配置，显示当前CLI连接状态（在线/离线），离线时给出连接异常提示。

- 会话管理界面：展示所有活跃会话（临时会话、项目会话），包含会话ID、关联操作（打标签、测试）、创建时间、上下文占用情况，支持手动关闭会话、导出会话内容。

### 2.5.2 上下文自动管理UI（对应模块5）

以右侧辅助面板形式展示，可折叠，实时监控上下文状态：

- 上下文监控：显示当前所有会话的上下文占用量、是否有溢出风险，溢出时给出预警提示，支持手动压缩上下文、导出上下文文件。

- 上下文设置：可配置上下文压缩规则、溢出处理策略（自动压缩/自动导出/提示手动处理），配置后实时生效。

# 三、UI交互逻辑（贴合User Case交互图）

1. 导入流程交互：用户点击导入按钮→选择导入方式→填写元数据/上传文件→确认导入→系统提示导入成功→自动触发打标签（可选）→打标签完成后提示审核→审核完成→更新检索索引，整个流程有明确的状态提示，失败时给出具体原因。

2. 浏览/搜索交互：用户点击分类树/输入搜索关键词→实时刷新列表→hover预览详情→点击进入详情页，支持面包屑导航，可快速返回上一级分类/搜索结果。

3. 对比测试交互：用户创建项目（选择对象→选择基线→配置参数）→进入项目详情→启动测试→实时查看进度和日志→测试完成→浏览对比结果，整个流程连贯，每个步骤有明确的操作反馈。

4. 重组迭代交互：用户浏览对比结果→勾选优势片段/输入保留规则→执行重组→预览编辑重组结果→启动迭代→查看迭代进度→迭代完成→查看报告、保存最优版本，支持在任意步骤返回上一步，修改配置。

# 三.五、Rankings 排行榜页面（模块11）

## 3.5.1 导航位置

顶部导航栏新增第四个 Tab（与 Skills & Agents / Baselines / Projects 并列）：

```
[ Skills & Agents ]  [ Baselines ]  [ Projects ]  [ Rankings ]
```

## 3.5.2 过滤栏

排行榜页面顶部固定过滤栏，所有过滤器均为可选，默认全部为空：

| 控件 | 类型 | 说明 |
|------|------|------|
| 🔍 Search | 文本输入框 | 按 Skill 名称模糊搜索 |
| Baseline | 下拉多选 | 选择一个或多个基线 |
| Purpose | 下拉多选 | 按用途（coding / writing / analysis）过滤 |
| Period | 下拉单选 | 全部 / 近 30 天 / 近 90 天 |
| 包含过期成绩 | 复选框 | 默认勾选；取消后只显示新鲜度 = current 的记录 |
| × 清除 | 链接按钮 | 重置全部过滤条件 |

## 3.5.3 默认视图（无过滤条件时）

按 Baseline 分组展示，每个分组默认收起显示 Top 5 记录，点击 [查看全部] 展开：

- 分组标题：基线名称 + 用例数量 + 当前基线版本 + "[查看全部 (N)]" 按钮
- 每行信息：排名序号 | Skill 名称（当前版本）| 得分（最优）| Trend 趋势箭头（↑/↓/→）| 新鲜度图标（✅⚠️🔶❌）| 测试次数 | 最后测试时间
- Trend 计算：该 Skill 在该 Baseline 上最新两条记录的分差；只有一条时显示 —

## 3.5.4 过滤后视图（选定 Baseline 或关键字时）

平铺显示排名列表，相同 Skill 的多条记录折叠合并：

- 合并行：以最优 avg_score 排名；行首三角箭头点击展开/收起该 Skill 所有历史记录
- 子行：每次测试一行，包含测试时版本 → 当前版本、得分、日期、项目名、新鲜度
- 展开维度：每行末尾 [展开] 按钮，内联显示 6 维度条形图 + "进入项目详情" 链接

## 3.5.5 视图切换

页面右上角提供 **排名视图 / 时间线视图** 两个切换按钮：

- **排名视图**（默认）：上述列表结构
- **时间线视图**：X 轴 = 测试日期，Y 轴 = avg_score，每个 Skill 一条折线；版本升级点（如 v1→v2）标注竖虚线；仅在选定了 Baseline 过滤后才有意义，否则提示"请先选择一个基线以查看时间线"

## 3.5.6 新鲜度状态说明面板

页面右上角 ⓘ 按钮，点击展开说明面板解释四种新鲜度图标含义：

- ✅ 当前有效：Skill 版本和基线版本均与测试时一致
- ⚠️ Skill 已更新：Skill 在测试后有新版本，成绩对应旧版本
- 🔶 基线已更新：测试用例已修改，旧成绩分母已变，不建议直接对比
- ❌ 全部已更新：Skill 和基线均已更新

## 3.5.7 导出

排行榜右上角 [导出 CSV] 按钮，导出当前过滤条件下的所有记录为 CSV 文件，
自动保存至 workspace/ 目录并弹出成功通知（含文件路径）。

# 四、UI设计规范（适配开发落地）

- 控件规范：统一使用简洁的按钮、输入框、下拉框，避免复杂控件；分页、筛选、搜索控件在所有列表界面保持一致，降低学习成本。

- 反馈规范：所有操作（导入、打标签、测试、重组等）均有明确的状态提示（加载中、成功、失败），失败提示包含具体原因和解决建议；长时间操作（如批量打标签、多轮迭代）显示进度条。

- 兼容性规范：适配主流浏览器（Chrome、Edge、Firefox），支持不同屏幕尺寸，主内容区可自适应缩放；支持键盘快捷键操作（如Ctrl+F全局搜索、Enter确认操作）。

- 可扩展性规范：UI布局预留扩展空间，后续新增功能（如多模型支持、批量导出）可直接嵌入现有框架，不破坏整体布局和交互逻辑；标签、分类等可在系统设置中自定义添加，适配后续需求迭代。

# 五、UI与模块/TODO任务对应关系

所有UI设计均对应文档中的模块功能及TODO任务，核心对应关系如下：

- 模块1（Skill管理）：UI中的Skill导入、标签管理、浏览、搜索、编辑、版本管理等控件，完全覆盖任务1-1至任务1-10。

- 模块2（基线管理）：UI中的基线导入、用例管理、标签管理等控件，覆盖任务2-1至任务2-5。

- 模块3（项目管理）：UI中的项目创建、配置、导出备份等控件，覆盖任务3-1至任务3-4。

- 模块6（对比测试）：UI中的测试控制、结果展示、容错处理等控件，覆盖任务6-1至任务6-4。

- 模块7（差异分析）：UI中的结果概览、差异详情、优势提取等控件，覆盖任务7-1至任务7-3。

- 模块8（Skill重组）：UI中的保留标准指定、重组执行、预览编辑等控件，覆盖补充后的任务8-1至任务8-3。

- 模块11（成绩排行榜）：UI中的 Rankings 顶导 Tab、过滤栏、排名列表（分组/平铺）、时间线折线图、Skill 列表 test badge、Skill 详情测试历史折叠区，覆盖任务11-1至11-8。

- 模块9（迭代验证）：UI中的迭代控制、进度展示、报告生成等控件，覆盖补充后的任务9-1至任务9-4。
> （注：文档部分内容可能由 AI 生成）